import{r as l,c as k,e as M,d as I,j as e,B as S,i as P,l as Z,P as L,u as le,X as ne,y as z,I as re,z as R,x as H}from"./index-C_I1pbpq.js";import{L as ce,e as Q,c as $,P as G}from"./Pagination-Cmdl9nxV.js";import{u as oe}from"./useConfirm-DAMkjVYv.js";import{s as Y}from"./show-n0aZwl5U.js";import"./rightArrow-89cJ_8Fk.js";const ie="data:image/webp;base64,UklGRhIEAABXRUJQVlA4WAoAAAAwAAAALwAALwAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZBTFBIwwEAAA2Qlm17nUgPDrIK+FYBcUBWAUVBi4KCgrYKoApIFUyrYIqDjIOMgv1WA6SHPf+MiAng/2u2t2IMoBrDh19N3kgbI3bnvsWV3pkr96OuUgFNCKqAMZKVSHZbQwq4kFSN/eZK2ekKFcQ+9XyzzpTNMibbGQc0zGwqzmWIj35WeeZly9zxM0es7G3jp1VfeNb2+yyKr7kAUsVmSrWB2MWgLFl3Ymwu1HpLSQGtZ/lRQ1fnXNuYqCB4Fs9vWncUhaPwCQsXpju7088xvKgx5zM0FXk3JUyyV8BsnZ4iYECBYJGYAHRKfua1u9cdXErTAmpY2hWg/Qc2B+9HfKOse4d4BMLjXbhflLULiCee4+nNiIyrHaDldRxKDsNqAiFBn+HG1QzE1M8ZBRsSAnG9x56yTRzgY70+w+2bFyVwWy88SuptE5FyA56fsM4sRWUUIHTLGU3pscjBGGBsmGgmRcGGFHre5NagoWGyhZAaDmT9BPBdMCgz80l9RjnEKUBkrjjoUiOO91OcNlvuMDLxdDVy7/wKrgK9TIntFansEBfaWYALk/1wFexBFnrWIzP7tshZUVvP7FgPzm4X+hFGFtUxfC70jw8AVlA4IFgAAABwBQCdASowADAAPlUgi0WjoiEeNAA4BUS0gArgD6AApG6kyZ1klRBQ6KAT0IMUmoRXMQwAAP7uAv//NN//5vu//8y9y65RpG/8ViMf/FYjj1yhZ/4rEAAA",Ae=({AccountDeleteModalHandler:a})=>{const[d,i]=l.useState(""),[A,t]=l.useState(!1),{setIsLoggedIn:x}=k.getState(),n=M(),{showAlert:o}=I(),c="오이,, 오이오이오이? 오이.. 오이 ㅠㅠ",h=r=>{const m=r.target.value;i(m),t(m===c)},p=()=>{a()},s=async()=>{if(!A){o({message:"탈퇴 문구와 일치하지 않습니다."});return}if(A)try{await P.delete("/member/delete",{data:{confirmationMessage:d}}),o({message:"계정이 탈퇴되었습니다."}),Z.remove("accessToken"),x(!1),n("/")}catch(r){console.error(r),alert("탈퇴 요청 처리 중 문제가 발생했습니다. 다시 시도해주세요.")}else alert("탈퇴 문구가 일치하지 않습니다.")};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-80",children:e.jsxs("div",{className:"bg-grayoe-900 text-white rounded-lg p-6 w-[90%] max-w-md",children:[e.jsx("h2",{className:"text-lg font-bold text-center mb-4",children:"정말 떠나실 건가요?"}),e.jsx("p",{className:"text-sm text-center mb-6",children:"탈퇴 시 아래 문구를 똑같이 입력해주세요"}),e.jsx("div",{className:"text-center mb-4 font-bold text-lg",children:c}),e.jsx("input",{type:"text",value:d,onChange:h,placeholder:"탈퇴문구 입력",className:"w-full p-2 border-b border-grayoe-400 bg-grayoe-900 placeholder-grayoe-400 focus:outline-none"}),e.jsxs("div",{className:"flex justify-between gap-2 mt-[72px]",children:[e.jsx(S,{onClick:p,size:"medium",isActive:!0,children:"계정유지"}),e.jsx("button",{onClick:s,className:`px-[68px] py-4 bg-grayoe-400 flex justify-center items-center rounded-md transition-all duration-300 truncate  ${A?"opacity-100":"hover:opacity-60 bg-[#2E2E2E]cursor-not-allowed"} `,children:"회원탈퇴"})]})]})})};function de({setNewPasswordModalOpen:a,handleNewPasswordModal:d}){const[i,A]=l.useState(""),[t,x]=l.useState(""),[n,o]=l.useState(!1),[c,h]=l.useState(!1),{showAlert:p}=I(),[s,r]=l.useState(!1);l.useEffect(()=>(r(!0),()=>r(!1)),[]);const m=y=>/^(?=.*[A-Za-z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/.test(y),f=y=>{const v=y.target.value;A(v),h(m(v))},b=y=>{const v=y.target.value;x(v),o(v===i)},j=async y=>{if(y.preventDefault(),n&&i&&c)await P.patch("/member/password",{newPw:i}),p({message:"비밀번호가 변경되었습니다."}),d();else{p({message:"비밀번호가 일치하지 않거나,",subMessage:"유효하지 않습니다."});return}},B=()=>{a(!1),d()};return e.jsx("div",{className:`modal ${s?"open":""} z-50`,children:e.jsxs("form",{onSubmit:j,className:"bg-grayoe-950 text-white w-full min-w-[360px] max-w-[520px] xl:max-w-none xl:w-[512px] relative h-svh xl:h-[400px] xl:rounded-2xl xl:px-6 xl:py-6 px-6 pb-[40px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center py-[18px] xl:pt-2 xl:pb-6 justify-between xl:justify-start mb-[40px] xl:mb-0",children:[e.jsx("button",{type:"button",className:"w-[18px] h-[18px] xl:w-[24px] xl:h-[24px] mr-3",children:e.jsx("img",{src:ce,onClick:B,alt:"뒤로가기"})}),e.jsx("h1",{className:"font-b2-semibold xl:font-h4",children:"비밀번호 변경"}),e.jsx("div",{className:"xl:hidden w-8"})]}),e.jsxs("div",{className:"grid",children:[e.jsx("p",{className:`${c?"text-grayoe-300":"redoe"} ${i?"label-visible":"label-hidden"} base-label`,children:"새 비밀번호"}),e.jsx(L,{value:i,minLength:8,onChange:f,type:"password",placeholder:"새 비밀번호 입력",isValid:c}),c===!1&&i!==""&&e.jsx("p",{className:"mt-1 text-[12px] redoe",children:"영문, 숫자, 특수문자를 포함하여 8자 이상 입력해주세요."})]}),e.jsxs("div",{className:"grid mb-4",children:[e.jsx("p",{className:`${n?"text-grayoe-300":"redoe"} ${t?"label-visible":"label-hidden"} base-label`,children:"새 비밀번호 재입력"}),e.jsx(L,{value:t,minLength:8,onChange:b,type:"password",placeholder:"새 비밀번호 재입력",isValid:n}),n===!1&&t!==""&&e.jsx("p",{className:"mt-1 text-[12px] redoe",children:"비밀번호가 일치하지 않습니다."})]}),e.jsx("div",{className:"mt-auto xl:mt-auto",children:e.jsx(S,{size:"large",isActive:n,children:"완료"})})]})})}function me({handleNewPasswordModal:a}){const[d,i]=l.useState(""),[A,t]=l.useState(!1),x=k(r=>r.user),{showAlert:n}=I(),[o,c]=l.useState(!1);l.useEffect(()=>(c(!0),()=>c(!1)),[]);const h=()=>{a()},p=r=>{i(r.target.value)},s=async()=>{try{await P.post("/login/oeasy",{email:x.email,pw:d}),t(!0)}catch(r){console.log(r),n({message:"인증 실패",subMessage:"비밀번호를 다시 확인해주세요."});return}};return e.jsxs("div",{className:`modal ${o?"open":""} z-50`,children:[e.jsxs("div",{className:"bg-grayoe-900 text-white rounded-lg p-6 w-[350px] max-w-md",children:[e.jsx("h2",{className:"text-lg font-bold text-center mb-4",children:"비밀번호 변경"}),e.jsx("input",{type:"password",value:d,onChange:p,placeholder:"이전 비밀번호를 입력해주세요.",className:"w-full py-1 border-b border-grayoe-400 bg-grayoe-900 placeholder-grayoe-400 focus:outline-none my-8"}),e.jsxs("div",{className:"flex justify-between gap-2 mt-8",children:[e.jsx(S,{type:"button",onClick:h,size:"medium",isActive:!0,children:"취소"}),e.jsx("button",{onClick:s,className:"px-[68px] py-4 bg-grayoe-400 flex justify-center items-center rounded-md transition-all duration-300 truncate opacity-100 hover:opacity-60 bg-[#2E2E2E]cursor-not-allowed",children:"확인"})]})]}),A&&e.jsx(de,{setNewPasswordModalOpen:t,handleNewPasswordModal:a})]})}function xe({handleEditModal:a}){const{setUser:d,clearUser:i,setIsLoggedIn:A}=k.getState(),t=k(u=>u.user),x=M(),[n,o]=l.useState(t.nickname),[c,h]=l.useState(!0),[p,s]=l.useState(""),[r,m]=l.useState(!1),[f,b]=l.useState(),[j,B]=l.useState(),[y,v]=l.useState(!1),[K,O]=l.useState(!1),X=le(),{showAlert:N}=I(),{showConfirm:J}=oe(),[q,D]=l.useState(!1);l.useEffect(()=>(D(!0),()=>D(!1)),[]);const _=u=>{const{value:w}=u.target,C=/^[a-zA-Z0-9가-힣\s]+(?![ㄱ-ㅎㅏ-ㅣ])$/;o(u.target.value),C.test(w)?(h(!0),m(!0)):(s("한글,영문,숫자로 최대 8자이내로 지어주세요."),h(!1),m(!1))},ee=u=>{var C;if(!((C=u.target.files)!=null&&C.length))return;const w=u.target.files[0];b(w),B(URL.createObjectURL(w)),m(!0)},se=async u=>{var C,V,F,W,T;u.preventDefault();let w={...t};if(f)try{const{data:g}=await P.patch("/member/profile-picture",{file:f},{headers:{"Content-Type":"multipart/form-data"}});w={...w,memberImage:g.imageUrl},N({message:"프로필 이미지가 변경되었습니다."})}catch(g){if(R.isAxiosError(g))if(((C=g.response)==null?void 0:C.status)===413){N({message:"파일 크기는 2MB이하여야 합니다.",subMessage:"업로드 가능한 크기 이하로 줄여주세요."});return}else console.error("Axios 에러:",(V=g.response)==null?void 0:V.data);else console.error("Unexpected error:",g)}if(c&&n!==(t==null?void 0:t.nickname))try{if(!n){N({message:"닉네임을 입력해주세요."});return}const{data:g}=await P.patch("/member/nickname",{newNickname:n});w={...w,nickname:g.nickname},N({message:"프로필이 변경되었습니다."})}catch(g){if(R.isAxiosError(g)){if(((F=g.response)==null?void 0:F.status)===400){N({message:"닉네임 형식이 올바르지 않습니다.",subMessage:"다시 시도해주세요."});return}else if(((W=g.response)==null?void 0:W.status)===409){N({message:"이미 사용중인 닉네임입니다.",subMessage:"다른 닉네임으로 변경해주세요."});return}else N({message:"닉네임 변경 중 오류가 발생했습니다.",subMessage:"잠시 후 다시 시도해주세요."});console.error("Axios error:",((T=g.response)==null?void 0:T.data)||g.message)}else N({message:"예기치 못한 오류가 발생했습니다.",subMessage:"다시 시도해주세요."});return}d(w),a()},U=()=>{if(t!=null&&t.kakaoId){N({message:"카카오 로그인은 이용할 수 없습니다."});return}v(u=>!u)},ae=()=>{o("")},te=async()=>{J({message:"로그아웃 하시겠습니까?",onConfirm:()=>{i(),Z.remove("accessToken"),X.clear(),A(!1),x("/"),localStorage.removeItem("aiOeMessages"),P.delete("/aioe/history")}})},E=()=>{O(u=>!u)};return e.jsxs("div",{className:`modal ${q?"open":""}`,children:[e.jsx("section",{className:"w-full max-w-[520px] xl:max-w-none",children:e.jsxs("form",{onSubmit:se,className:"bg-grayoe-950 text-white w-full min-w-[360px] max-w-[520px] xl:max-w-none xl:w-[512px] relative h-svh xl:h-auto xl:rounded-2xl xl:px-6 xl:py-6",children:[e.jsxs("div",{className:"w-full flex items-center py-4 mb-[64px] xl:m-0 justify-between px-6 xl:px-0",children:[e.jsx("div",{className:"xl:hidden w-8"}),e.jsx("p",{className:"font-b2-semibold xl:font-h4",children:"계정 설정"}),e.jsx("button",{type:"button",onClick:a,children:e.jsx("img",{src:ne,alt:"닫기버튼"})})]}),e.jsxs("div",{className:"px-6 xl:px-0",children:[e.jsxs("div",{className:"relative w-[100px] mx-auto my-[36px] flex justify-center",children:[j?e.jsx("img",{src:j,alt:"profile",className:"w-[80px] h-[80px] rounded-full object-cover border-grayoe-800 border-2"}):e.jsx("img",{src:(t==null?void 0:t.memberImage)===null?z:t==null?void 0:t.memberImage,alt:"profile",className:"w-[80px] h-[80px] rounded-full object-cover border-grayoe-800 border-2"}),e.jsxs("label",{htmlFor:"file",className:"absolute bottom-0 right-2 bg-grayoe-500 border-grayoe-800 border-2 rounded-full p-[3px]",children:[e.jsx("img",{src:ie,alt:"사진첨부",className:"w-4 cursor-pointer"}),e.jsx("input",{type:"file",name:"file",id:"file",accept:"image/*",className:"hidden",onChange:ee})]})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:`text-sm ${n===""||c?"text-grayoe-300":"redoe"}`,children:"닉네임"}),e.jsx(re,{value:n,maxLength:8,onChange:_,isValid:n===""||c,onClick:ae}),c===!1&&n!==""?e.jsx("p",{className:"redoe label-visible base-label mt-1",children:p}):e.jsx("p",{className:"base-label label-hidden"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-grayoe-300 text-sm mb-3",children:"이메일"}),e.jsx("p",{className:"text-grayoe-400",children:t==null?void 0:t.email}),e.jsx("hr",{className:"border-grayoe-700 mt-2"})]}),e.jsxs("div",{className:"items-center",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{className:"block text-grayoe-300 text-sm mb-3",children:"비밀번호"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-grayoe-300",children:"●●●●●●●●"}),e.jsx("button",{type:"button",onClick:U,className:"bg-grayoe-500 hover:bg-grayoe-700 duration-150 text-sm py-1 px-2 rounded font-c2",children:"비밀번호 변경"})]})]}),e.jsx("hr",{className:"border-grayoe-700 mt-3"})]})]})]}),e.jsx("div",{className:"border-b-8 my-6 border-grayoe-900 xl:hidden"}),e.jsxs("div",{className:"flex gap-5 w-full text-sm text-grayoe-300 bg-grayoe-950 items-center justify-center font-c2 xl:mt-4",children:[e.jsx("button",{type:"button",onClick:te,children:"로그아웃"}),e.jsx("span",{children:"|"}),e.jsx("button",{type:"button",onClick:E,children:"회원탈퇴"})]}),e.jsx("div",{className:"mt-10 px-6 xl:px-0",children:e.jsx(S,{type:"submit",size:"large",isActive:r,children:"저장"})})]})}),y&&e.jsx(me,{handleNewPasswordModal:U}),K&&e.jsx(Ae,{AccountDeleteModalHandler:E})]})}function ge(){const[a,d]=l.useState(),[i,A]=H(),[t,x]=l.useState(0),n=k(s=>s.user),o=parseInt(i.get("page")||"1"),c=M(),h=s=>{const r=new Date(s),m=String(r.getFullYear()).slice(-2),f=String(r.getMonth()+1).padStart(2,"0"),b=String(r.getDate()).padStart(2,"0");return`${m}.${f}.${b}`};l.useEffect(()=>{(async()=>{const r=await P.get("/api/community/my-Cmn",{params:{page:o-1,size:5,memberId:n==null?void 0:n.memberPk}}),{contents:m,totalPages:f}=r.data;x(f);const b=m.map(j=>({...j,createTime:h(j.createTime)}));d(b)})()},[o,n]);const p=s=>{c(`/community/detail/${s}`,{state:{cmnId:s}})};return e.jsxs("div",{className:"w-full",children:[(a==null?void 0:a.length)===0?e.jsx("div",{className:"text-center mt-8",children:"작성한 게시글이 없습니다."}):a==null?void 0:a.map(s=>e.jsxs("div",{children:[e.jsx("hr",{className:"border-grayoe-900"}),e.jsx("div",{className:"w-full py-4 px-6 ",children:e.jsxs("button",{className:"flex flex-col",onClick:()=>p(s.boardPk),children:[e.jsx("p",{className:"text-grayoe-300 font-c2 mb-1",children:s.createTime}),e.jsx("p",{className:"font-b2-semibold line-clamp-1",children:s.title}),e.jsxs("div",{className:"flex font-c2 items-center space-x-2 mt-2",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("img",{src:Q,alt:"좋아요",className:"w-[14px] h-[14px]"}),e.jsx("p",{children:s.likeCnt>0?s.likeCnt:0})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("img",{src:Y,alt:"조회수",className:"w-[14px] h-[14px]"}),e.jsx("p",{children:s.viewCnt>0?s.viewCnt:0})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("img",{src:$,alt:"댓글",className:"w-[14px] h-[14px]"}),e.jsx("p",{children:s.comentCnt>0?s.comentCnt:0})]})]})]})})]},s.boardPk)),a&&a.length>0&&e.jsx("div",{className:"flex justify-center",children:e.jsx(G,{totalPageNumber:t,currentPage:o,setCurrentPage:s=>A({page:s.toString()})})})]})}function ue(){const[a,d]=l.useState(),[i,A]=H(),[t,x]=l.useState(0),n=k(s=>s.user),o=parseInt(i.get("likedPage")||"1"),c=M(),h=s=>{const r=new Date(s),m=String(r.getFullYear()).slice(-2),f=String(r.getMonth()+1).padStart(2,"0"),b=String(r.getDate()).padStart(2,"0");return`${m}.${f}.${b}`};l.useEffect(()=>{(async()=>{const r=await P.get("/api/community/my-likes",{params:{page:o-1,size:5,memberId:n==null?void 0:n.memberPk}}),{contents:m,totalPages:f}=r.data;x(f);const b=m.map(j=>({...j,createTime:h(j.createTime)}));d(b)})()},[o,n]);const p=s=>{c(`/community/detail/${s}`,{state:{cmnId:s}})};return e.jsxs("div",{className:"w-full",children:[(a==null?void 0:a.length)===0?e.jsx("div",{className:"text-center mt-8",children:"좋아요한 게시글이 없습니다."}):a==null?void 0:a.map(s=>e.jsxs("div",{children:[e.jsx("hr",{className:"border-grayoe-900"}),e.jsx("div",{className:"w-full py-4 px-6",children:e.jsxs("button",{className:"flex flex-col",onClick:()=>p(s.boardPk),children:[e.jsx("p",{className:"text-grayoe-300 font-c2 mb-1",children:s.createTime}),e.jsx("p",{className:"font-b2-semibold line-clamp-1",children:s.title}),e.jsxs("div",{className:"flex font-c2 items-center space-x-2 mt-2",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("img",{src:Q,alt:"좋아요",className:"w-[14px] h-[14px]"}),e.jsx("p",{children:s.likeCnt>0?s.likeCnt:0})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("img",{src:Y,alt:"조회수",className:"w-[14px] h-[14px]"}),e.jsx("p",{children:s.viewCnt>0?s.viewCnt:0})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("img",{src:$,alt:"댓글",className:"w-[14px] h-[14px]"}),e.jsx("p",{children:s.comentCnt>0?s.comentCnt:0})]})]})]})})]},s.boardPk)),a&&a.length>0&&e.jsx("div",{className:"flex justify-center",children:e.jsx(G,{totalPageNumber:t,currentPage:o,setCurrentPage:s=>A({likedPage:s.toString()})})})]})}function we(){const a=k(c=>c.user),[d,i]=l.useState(!1),[A,t]=l.useState(!0),x=()=>{i(c=>!c)},n=()=>t(!0),o=()=>t(!1);return e.jsxs("div",{className:"w-full xl:w-[688px] mx-auto",children:[e.jsx("p",{className:"hidden xl:flex font-h3 mx-4",children:"마이페이지"}),e.jsxs("div",{className:"flex p-4 bg-grayoe-900 rounded-lg items-center my-6 mx-4 xl:mx-0",children:[e.jsxs("div",{className:"w-full flex items-center",children:[e.jsx("img",{src:a!=null&&a.memberImage?a==null?void 0:a.memberImage:z,alt:"프로필이미지",className:"w-[48px] h-[48px] rounded-full"}),e.jsx("h6",{className:"font-h6 ml-2",children:a==null?void 0:a.nickname})]}),e.jsx("button",{onClick:x,className:"h-[32px] px-3 whitespace-nowrap bg-grayoe-400 hover:bg-grayoe-700 duration-150 rounded font-c2",children:"계정 설정"})]}),d&&e.jsx(xe,{handleEditModal:x}),e.jsxs("div",{className:"w-full flex mt-6",children:[e.jsx("button",{onClick:n,className:`w-1/2 p-3 border-b-2 ${A?"border-greenoe-600":"border-grayoe-900 text-grayoe-400"} text-center text-[14px]`,children:"게시글"}),e.jsx("button",{onClick:o,className:`w-1/2 p-2 border-b-2 ${A?"border-grayoe-900 text-grayoe-400":"border-greenoe-600"} text-center text-[14px]`,children:"좋아요"})]}),A?e.jsx(ge,{}):e.jsx(ue,{})]})}export{we as default};
