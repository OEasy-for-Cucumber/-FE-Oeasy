import{C as j,c as g,r as m,e as f,f as k,j as e,i}from"./index-C_I1pbpq.js";import{F as y,H as N}from"./recipeLikeFull-DRQ06B1t.js";function w(){var o;const{id:c}=j(),{user:s}=g(),[t,d]=m.useState(),x=f(),l="font-b2-regular text-grayoe-100",p=async()=>(await i.get(`/api/recipe/board/like-check/${s==null?void 0:s.memberPk}/${c}`)).data,{data:n,refetch:h}=k({queryKey:["likedDetailData"],queryFn:p}),u=n?n[0].liked:!1;m.useEffect(()=>{(async()=>{try{const r=await i.get(`/api/recipe?id=${c}`);d(r==null?void 0:r.data)}catch(r){console.error("Error fetching data:",r)}})()},[c]);const b=async()=>{const a=s==null?void 0:s.memberPk;if(!s){x("/login");return}try{await i.post("/api/recipe/like",{recipePk:c,memberPk:a}),h()}catch(r){console.error("좋아요 처리 실패:",r)}};return e.jsx("section",{className:"xl:w-[864px] mx-auto",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.recipeImg,alt:t.title,className:" xl:h-[600px] w-full xl:object-cover"}),e.jsx("button",{onClick:a=>{a.preventDefault(),b()},className:"absolute right-2 bottom-2",children:e.jsx("img",{src:u?y:N,alt:"레시피 좋아요 버튼",className:"w-[48px] h-[48px]"})})]}),e.jsxs("div",{className:"mx-6 my-[34px]",children:[e.jsx("h5",{className:"font-h5 mb-2",children:t.title}),e.jsx("p",{className:"font-b1-regular",children:t.tip})]}),e.jsx("div",{className:"h-2 bg-grayoe-900 mb-6"}),e.jsxs("div",{className:"mx-6 border-b border-grayoe-900 pb-4 mb-4",children:[e.jsx("p",{className:l,children:"재료"}),e.jsx("p",{children:t.ingredients})]}),e.jsxs("div",{className:"mx-6 mb-6",children:[e.jsx("p",{className:l,children:"조리과정"}),e.jsx("ul",{children:(o=t.manualList)==null?void 0:o.map(a=>e.jsx("li",{children:a.content},a.order))})]})]})})}export{w as default};
