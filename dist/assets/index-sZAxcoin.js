import{z as g,c as f,r as m,e as k,d as y,f as N,j as e,i}from"./index-JxLw885_.js";import{F as v,H as D}from"./recipeLikeFull-DRQ06B1t.js";function P(){var o;const{id:c}=g(),{user:a}=f(),[t,d]=m.useState(),x=k(),{showAlert:p}=y(),l="font-b2-regular text-grayoe-100",h=async()=>(await i.get(`/api/recipe/board/like-check/${a==null?void 0:a.memberPk}/${c}`)).data,{data:n,refetch:u}=N({queryKey:["likedDetailData"],queryFn:h}),b=n?n[0].liked:!1;m.useEffect(()=>{(async()=>{try{const r=await i.get(`/api/recipe?id=${c}`);d(r==null?void 0:r.data)}catch(r){console.error("Error fetching data:",r)}})()},[c]);const j=async()=>{const s=a==null?void 0:a.memberPk;if(!a){p({message:"로그인 후 이용해주세요"}),x("/login");return}try{await i.post("/api/recipe/like",{recipePk:c,memberPk:s}),u()}catch(r){console.error("좋아요 처리 실패:",r)}};return e.jsx("section",{className:"xl:w-[864px] mx-auto",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.recipeImg,alt:t.title,className:" xl:h-[600px] w-full xl:object-cover"}),e.jsx("button",{onClick:s=>{s.preventDefault(),j()},className:"absolute right-2 bottom-2",children:e.jsx("img",{src:b?v:D,alt:"레시피 좋아요 버튼",className:"w-[48px] h-[48px]"})})]}),e.jsxs("div",{className:"mx-6 my-[34px]",children:[e.jsx("h5",{className:"font-h5 mb-2",children:t.title}),e.jsx("p",{className:"font-b1-regular",children:t.tip})]}),e.jsx("div",{className:"h-2 bg-grayoe-900 mb-6"}),e.jsxs("div",{className:"mx-6 border-b border-grayoe-900 pb-4 mb-4",children:[e.jsx("p",{className:l,children:"재료"}),e.jsx("p",{children:t.ingredients})]}),e.jsxs("div",{className:"mx-6 mb-6",children:[e.jsx("p",{className:l,children:"조리과정"}),e.jsx("ul",{children:(o=t.manualList)==null?void 0:o.map(s=>e.jsx("li",{children:s.content},s.order))})]})]})})}export{P as default};
