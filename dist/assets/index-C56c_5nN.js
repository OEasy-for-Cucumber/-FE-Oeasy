import{Q as B,m as w,o as S,p as U,q as F,i as v,c as E,r as f,e as j,d as L,j as t,L as R,t as C}from"./index-JxLw885_.js";import{F as D,H as J}from"./recipeLikeFull-DRQ06B1t.js";import{r as y}from"./rightArrow-89cJ_8Fk.js";var H=class extends B{constructor(e,a){super(e,a)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,a){super.setOptions({...e,behavior:w()},a)}getOptimisticResult(e){return e.behavior=w(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,a){var g,u;const{state:n}=e,o=super.createResult(e,a),{isFetching:s,isRefetching:l,isError:x,isRefetchError:h}=o,A=(u=(g=n.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:u.direction,m=x&&A==="forward",p=s&&A==="forward",i=x&&A==="backward",r=s&&A==="backward";return{...o,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:S(a,n.data),hasPreviousPage:U(a,n.data),isFetchNextPageError:m,isFetchingNextPage:p,isFetchPreviousPageError:i,isFetchingPreviousPage:r,isRefetchError:h&&!m&&!i,isRefetching:l&&!p&&!r}}};function Z(e,a){return F(e,H)}function I(){return Z({queryKey:["recipes"],queryFn:async({pageParam:e=1})=>(await v.get("api/recipe/board",{params:{view:12,page:e}})).data,getNextPageParam:e=>e.hasNextPage?e.nowPage+1:void 0,initialPageParam:1})}function O(){const{data:e,fetchNextPage:a,hasNextPage:n,isLoading:o}=I(),{user:s}=E(),l=f.useRef(null),[x,h]=f.useState({}),A=j(),{showAlert:m}=L();f.useEffect(()=>{s&&e&&(async()=>{var P,N;const c=((e==null?void 0:e.pageParams.length)||0)-1,g=((N=(P=e==null?void 0:e.pages[c])==null?void 0:P.list)==null?void 0:N.map(d=>d.id))||[],u=s==null?void 0:s.memberPk,M=g;try{const d=await v.get(`api/recipe/board/like-check/${u}/${M}`);h(Q=>({...Q,...d.data.reduce((b,k)=>(b[k.recipePk]=k.liked,b),{})}))}catch(d){console.error("좋아요 상태 확인 실패:",d)}})()},[e,s]),f.useEffect(()=>{if(!l.current||!n)return;const i=new IntersectionObserver(([r])=>{r.isIntersecting&&a()},{root:null,rootMargin:"100px",threshold:0});return i.observe(l.current),()=>i.disconnect()},[a,n]);const p=async i=>{const r=s==null?void 0:s.memberPk;if(!s){m({message:"로그인 후 이용해주세요"}),A("/login");return}try{await v.post("/api/recipe/like",{recipePk:i,memberPk:r}),h(c=>({...c,[i]:!c[i]}))}catch(c){console.error("좋아요 처리 실패:",c)}};return o?t.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-200px)]",children:t.jsx(R,{})}):t.jsxs(t.Fragment,{children:[e==null?void 0:e.pages.map(i=>t.jsx("div",{className:"grid grid-cols-2 xl:grid-cols-4 gap-4 justify-items-center mb-4",children:i.list.map(r=>{const c=x[r.id]||!1;return t.jsx("div",{children:t.jsxs(C,{to:`/recipe-detail/${r.id}`,children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:r.imgUrl,alt:r.title,className:"w-[225px] h-[148px] object-cover rounded relative"}),t.jsx("button",{onClick:g=>{g.preventDefault(),p(r.id)},className:"absolute right-0 bottom-0",children:t.jsx("img",{src:c?D:J,alt:"레시피 좋아요 버튼",className:"w-[48px] h-[48px]"})})]}),t.jsx("div",{className:"py-2 font-b1-semibold",children:r.title})]})},r.id)})},i.nowPage)),!o&&t.jsx("div",{ref:l})]})}const V="data:image/webp;base64,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",T="/assets/recipe_heart-zS4cAa33.webp";function G(){const e=j(),{user:a}=E(),{showAlert:n}=L(),o=async()=>{const s=await v("/api/recipe/random"),l=s==null?void 0:s.data;e(`/recipe-detail/${l}`)};return t.jsxs("section",{className:"px-6 xl:px-0 xl:w-[864px] xl:mx-auto",children:[t.jsxs("div",{className:"my-[24px] xl:flex xl:gap-4",children:[t.jsxs("button",{onClick:o,className:"w-full border border-greenoe-800 py-[16px] pl-[24px] mb-4 xl:m-0 rounded-lg relative flex flex-col",children:[t.jsx("h5",{className:"font-h5 mb-2",children:"오이로 뭐 해먹지?"}),t.jsxs("div",{className:"items-center w-[125px] h-[20px] px-2 py-[2px] bg-greenoe-800 rounded-full font-c2 flex truncate gap-1",children:["오늘 요리 추천 받기",t.jsx("img",{src:y,alt:"랜덤버튼",className:"w-[14px] h-[14px]"})]}),t.jsx("img",{src:V,alt:"랜덤레시피 버튼 이미지",className:"w-[62px] h-[68px] xl:w-[67px] xl:h-[73px] absolute right-[23px] xl:right-[30px] top-[11px] xl:top-[9px]"})]}),t.jsxs("button",{onClick:()=>{if(!a){n({message:"로그인 후 이용해주세요"}),e("/login");return}e("/like-recipes")},className:"w-full border border-greenoe-800 py-[16px] pl-[24px] rounded-lg relative flex flex-col",children:[t.jsx("h5",{className:"font-h5 mb-2",children:"나 오이 좋아하네"}),t.jsxs("div",{className:"items-center w-[132px] h-[20px] px-2 py-[2px] bg-greenoe-800 rounded-full font-c2 flex truncate gap-1",children:["내가 좋아요한 레시피",t.jsx("img",{src:y,alt:"랜덤버튼",className:"w-[14px] h-[14px]"})]}),t.jsx("img",{src:T,alt:"랜덤레시피 버튼 이미지",className:"w-[63px] h-[60px] xl:w-[68px] xl:h-[65px] absolute right-[23px] xl:right-[30px] top-[15px] xl:top-[13px]"})]})]}),t.jsx(O,{})]})}export{G as default};
